<!doctype html>

<html lang="en">
<head>
	<meta charset="utf-8">

	<title>Mosaic 2016</title>
	<meta name="description" content="Mosaic 2016">
	<meta name="dmccallie" content="">

	<link rel="stylesheet" href="css/styles.css?v=1.0">
	
	<style>
		div.frame {
			background-color: #d0e4fe;
			border: 2px solid red ;
			width: 640px;
			height: 640px;
			position: relative;
		}
		div.tile {
			position: absolute;
		}
		img.s128 {
			width: 128px;
			height: 128px;
		}

		.tileWrapper {
  		width:128px;
  		height:128px;
  		position:relative;
  		float:left;
  	}

  	.tileFace {
  		position:absolute;
  		width:128px;
  		height:128px;
  		overflow:hidden;
  	}

  	img.tile128 {
			width: 128px;
			height: 128px;
		}

		.back .front {
			backface-visibility:hidden;
		}
}

}

	</style>
</head>

<body>

	<h2>hello cruel world</h2>
	<div class="frame" id="outer">
		<div class="tile" style="top:0px;left:0px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:0px;left:128px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:0px;left:256px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:0px;left:384px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:0px;left:512px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>

		<div class="tile" style="top:128px;left:0px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:128px;left:128px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:128px;left:256px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:128px;left:384px;">
			<img class="s128" src="/static/CRW_6843.jpg">
		</div>
		<div class="tile" style="top:128px;left:512px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:256px;left:0px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:256px;left:128px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:256px;left:256px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:256px;left:384px;">
			<img class="s128" src="/static/CRW_6843.jpg">
		</div>
		<div class="tile" style="top:256px;left:512px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:384px;left:0px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:384px;left:128px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:384px;left:256px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:384px;left:384px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:384px;left:512px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
	</div>


	<div class="frame" id="outer2">
		
		<div class="tileWrapper" style="top:0px;left:0px;">
			<div class = "card">
				<div class="tileFace front">
					<img class="tile128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
				</div>
				<div class="tileFace back">
					<img class="tile128" src="/static/CRW_6843.jpg">
				</div>
			</div>
		</div>

		<div class="tile" style="top:0px;left:128px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:0px;left:256px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:0px;left:384px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:0px;left:512px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>

		<div class="tile" style="top:128px;left:0px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:128px;left:128px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:128px;left:256px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:128px;left:384px;">
			<img class="s128" src="/static/CRW_6843.jpg">
		</div>
		<div class="tile" style="top:128px;left:512px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:256px;left:0px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:256px;left:128px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:256px;left:256px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:256px;left:384px;">
			<img class="s128" src="/static/CRW_6843.jpg">
		</div>
		<div class="tile" style="top:256px;left:512px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:384px;left:0px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:384px;left:128px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:384px;left:256px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:384px;left:384px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
		<div class="tile" style="top:384px;left:512px;">
			<img class="s128" src="https://davidmccallie.s3.amazonaws.com/CRW_4779-sized.jpg">
		</div>
	</div>


	<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.2/TweenMax.min.js"></script>
	<script>

		TweenMax.set(".tileWrapper", {perspective:800});
		TweenMax.set(".card", {transformStyle:"preserve-3d"});
		TweenMax.set(".back", {rotationY:-180});
		TweenMax.set([".back", ".front"], {backfaceVisibility:"hidden"});

		$(".tileWrapper").click(function(event) {
			//fixme - needs state + absolute, else gets stuck on rapid clicks
			event.stopPropagation();
			TweenMax.to($(this).find(".card"), 1, {rotationY:180});	
		})

		var topZ = 10;
		TweenMax.set(".frame", {perspective:800});
		//can also use hover or mouseover / mouseout
		$(".s128").mouseenter(function() {
			//TweenMax.to($(this), 1, {rotationY:180});
			$(this).parent().css("zIndex", topZ+1);
			TweenMax.to($(this), 1, {scale:2});
		});
		$(".s128").mouseleave(function() {
			$(this).parent().css("zIndex", topZ-1);
			TweenMax.to($(this), 1, {scale:1, onComplete:resetZindex,onCompleteParams:[$(this)]});
			//TweenMax.to($(this), 1, {rotationY:0});
		});
		function resetZindex(item) {
			item.parent().css("zIndex", 0)
		}

		$(".s128").click(function(event) {
			//fixme - needs state + absolute, else gets stuck on rapid clicks
			event.stopPropagation();
			TweenMax.to($(this), 1, {rotationY:"+=180"});	
		})

		$("#outer").click(function() {
			//fixme - needs state + absolute, else gets stuck on rapid clicks
			TweenMax.staggerTo($(".s128"), 1, {rotationY:-180, repeat:1, yoyo:true}, 0.1);	
		})
	


	</script>
	
</body>
</html>